let pokemonRepository = function () { let e = [], t = "https://pokeapi.co/api/v2/pokemon/?limit=150"; function n(t) { "object" == typeof t && "name" in t && "detailsUrl" in t ? e.push(t) : console.log("Pokemon does not contain expected values") } function o(e) { (function (e) { let t = e.detailsUrl; return fetch(t).then(e => e.json()).then(t => { e.artUrl = t.sprites.other["official-artwork"].front_default, e.id = t.id, e.height = t.height, e.weight = t.weight, e.types = t.types }).catch(e => { console.error(e) }) })(e).then(() => { !function (e) { let { name: t, artUrl: n, id: o, height: l, weight: i, types: r } = e; o = String(o).padStart(3, "0"), l = function (e) { e = (e / 10 * 3.28).toFixed(2); let t = Math.floor(e), n = Math.round(12 * (e - t)); n = String(n).padStart(2, "0"); let o = ""; return o = "12" === n ? `${t + 1}' 00"` : `${t}' ${n}"` }(l), i = function (e) { return (e = (e / 10 * 2.2).toFixed(1)) % 1 == 0 ? Math.floor(e) : e }(i); let a = function (e) { if (e.length > 1) return `${e[0].type.name}, ${e[1].type.name}`; return `${e[0].type.name}` }(r), d = document.querySelector(".modal-title"), s = document.querySelector(".modal-body"); s.innerHTML = "", d.innerHTML = "", d.innerText = t + ` #${o}`; let c = document.createElement("div"); c.classList.add("pokemon-content"), c.innerHTML = `\n            <img src="${n}" alt="${t}"/>\n        `; let p = document.createElement("div"); p.classList.add("pokemon-info"), p.innerHTML = `\n            <span class="height">Height: ${l}</span>\n            <span class="weight">Weight: ${i} lbs</span>\n        `; let u = document.createElement("span"), m = document.createElement("span"); if (a.includes(",")) { let e = a.split(","); u.classList.add(e[0]), m.classList.add(e[1].trim()), u.innerText = e[0], m.innerText = e[1].trim(), p.appendChild(u), p.appendChild(m) } else u.classList.add(a), u.innerText = a, p.appendChild(u); c.appendChild(p), s.appendChild(c) }(e) }) } function l() { let e = document.querySelector(".loading-message"), t = document.querySelector(".loading-text"); setTimeout(() => e.removeChild(t), 300) } let i = document.querySelector("#filter"); return i.addEventListener("input", () => { let e = document.querySelectorAll("li"), t = i.value.toUpperCase(); e.forEach(e => { e.innerText.toUpperCase().indexOf(t) > -1 ? e.style.display = "" : e.style.display = "none" }) }), { add: n, getAll: function () { return e }, loadList: function () { return function () { let e = document.querySelector(".loading-message"), t = document.createElement("h1"); t.classList.add("loading-text"), t.innerText = "Loading...", e.appendChild(t) }(), fetch(t).then(e => e.json()).then(e => { e.results.forEach(e => { n({ name: e.name, detailsUrl: e.url }) }), l() }).catch(e => { console.error(e), l() }) }, addListItem: function (e) { (async function (e) { let t = await fetch(e.detailsUrl), n = await t.json(); return e.spriteUrl = n.sprites.front_default, n })(e).then(() => { const { name: t, spriteUrl: n } = e; let l = document.querySelector(".pokemon-list"), i = document.createElement("li"); i.classList.add("list-group-item"); let r = document.createElement("button"); r.classList.add("pokemon-button"), r.setAttribute("data-toggle", "modal"), r.setAttribute("data-target", "#poke-modal"), r.innerHTML = `\n                    <img src="${n}" alt="${t}"/>\n                    <p>${t}</p>\n                `, i.appendChild(r), l.appendChild(i), function (e, t) { e.addEventListener("click", function (e) { o(t) }) }(r, e) }) } } }(), scrollButton = document.getElementById("btn-to-top"); function toTop() { document.body.scrollTop = 0, document.documentElement.scrollTop = 0 } scrollButton.addEventListener("click", toTop), pokemonRepository.loadList().then(() => { pokemonRepository.getAll().forEach(e => pokemonRepository.addListItem(e)) }).catch(e => console.log("this broken"));